Step 5 Is

Itâ€™s a little robot (a Node script) that checks your live site automatically and says:

â€œâœ… Health check worksâ€

â€œâœ… Manifest has iconsâ€

â€œâŒ Screenshot missingâ€
...so we can catch broken things before adding new features.

ğŸ§© What You Need First

Make sure you already have:

Your Replit project running (the TruthDetectorPro PWA).

The site is live (you can open it at https://truthdetectorpro.onrender.com).

Your extension is working (badge â€œON,â€ ribbon appears).

Now the robot can test the site part.

ğŸªœ Step-by-Step Setup
1ï¸âƒ£ Create the robot folder and file

In Replit (left sidebar):

Right-click the main project â†’ New Folder â†’ name it scripts

Inside it, New File â†’ name it smoke.mjs

Paste this exact code inside that new file:

// Run with: node scripts/smoke.mjs https://truthdetectorpro.onrender.com
import fetch from "node-fetch";

const base = process.argv[2] || "http://localhost:3000";
let failed = 0;
const check = (msg, ok) => {
  console.log(`${ok ? "âœ…" : "âŒ"} ${msg}`);
  if (!ok) failed++;
};

async function run() {
  try {
    const hz = await fetch(`${base}/healthz`);
    check("/healthz returns ok", hz.ok && (await hz.text()).trim() === "ok");

    const mres = await fetch(`${base}/manifest.webmanifest`);
    if (!mres.ok) {
      check("manifest reachable", false);
    } else {
      const m = await mres.json().catch(() => null);
      const icons = (m?.icons || []).map(i => i.sizes || "").join(",");
      const shots = (m?.screenshots || []).map(s => s.sizes || "").join(",");
      check("manifest reachable", true);
      check("has 192 & 512 icons", /192/.test(icons) && /512/.test(icons));
      check("has 1280x720 & 1080x1920 screenshots", /1280/.test(shots) && /1080/.test(shots));
    }
  } catch (e) {
    console.log("âŒ Smoke test crashed:", e.message);
    failed++;
  }
  console.log("\n---");
  console.log(failed ? `âŒ ${failed} tests failed` : "âœ… All tests passed!");
  process.exit(failed ? 1 : 0);
}

run();

2ï¸âƒ£ Tell Replit how to run it

Open your package.json file, find "scripts": { ... }, and add this line inside:

"smoke": "node scripts/smoke.mjs https://truthdetectorpro.onrender.com"


It should look something like this:

"scripts": {
  "start": "node index.js",
  "smoke": "node scripts/smoke.mjs https://truthdetectorpro.onrender.com"
}


Save it.

3ï¸âƒ£ Run the robot ğŸ¤–

At the bottom of Replit, click the Shell tab.

Type:

npm run smoke


and hit Enter.

ğŸ§¾ What You Should See

Something like:

âœ… /healthz returns ok
âœ… manifest reachable
âœ… has 192 & 512 icons
âœ… has 1280x720 & 1080x1920 screenshots
---
âœ… All tests passed!


If you see any âŒ red lines, copy those lines and paste them here â€” that tells me exactly whatâ€™s broken so I can fix or generate the missing file for you.

ğŸ” What Happens Next

Once this robot says â€œâœ… All tests passed,â€ youâ€™ll be fully ready to move to Phase 2:

adding automatic daily risk reports inside the extension,

connecting the extensionâ€™s exports to the Evidence Vault in your PWA.